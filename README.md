
# SDPlugin - CLIP Studio Paint用 画像生成プラグイン

クリスタのフィルターとして動作する画像生成プラグインです。<br>
開発中ですので、お暇な方はテストにご協力ください。

## ご注意（配布の目的や利用条件など）

このプラグインはあくまで自分で使用するために開発しています。

フィルタープラグインは、株式会社セルシスの許可がない再配布を認められていません。<br>
<sub>参照： 「[CLIP STUDIO PAINT EXフィルタープラグインSDK使用許諾契約書](https://www.clipstudio.net/ja/dl/cspsdk_term/)」第4条（フィルタープラグインの再配布）</sub>

ただし、第三者に対して開発を委託することは認められています。<br>
<sub>参照： 「[CLIP STUDIO PAINT EXフィルタープラグインSDK使用許諾契約書](https://www.clipstudio.net/ja/dl/cspsdk_term/)」第3条（委託）</sub>

ここで公開しているプラグインは、評価やテストなど開発への協力を委託する目的で配布しています。<br>
ダウンロードした際はフィードバックをお願いします。<br>

## 使用方法

プラグインのバイナリは [リリースページ](https://github.com/AonekoSS/SDPlugin/releases) からダウンロードしてください。

ダウンロードした「SDPlugin.zip」ファイルを解答したら、フォルダ内にある「install.bat」を実行してください。<br>
上手くいかない場合は、以下の場所にフォルダごとコピーして貰っても大丈夫です。<br>

> ドキュメント/CELSYS/CLIPStudioModule/PlugIn/PAINT

クリスタのインストールされてる場所とは違うので注意してください。

インストール先の「SDPlugin.ini」ファイルを編集して下さい。
```
[COMMON]
	model_path = （モデルのパス）.safetensors
```
ここにモデルへのファイルパスを入れてください。<br>

あとはクリスタを起動すれば、メニューのフィルターの所に「Stable Diffusion(X)」の項目が増えてると思います。


## 動作環境

Windows専用です。<br>
古いバージョンだと CLIP Studio PAINT EX 1.10 で動作するのを確認できました。<br>
たぶん、それ以降のバージョンなら動くと思います。<br>
（Ver 3.1.2での動作報告あり）<br>


## 開発メモ

- プロンプト欄の挙動がおかしい時があります（入力内容が表示されなかったり反映されなかったりする）
	- 調査中、どうもクリスタのバージョンが古いとなりやすいっぽい？
- 透明なレイヤーには生成しません（生成するけど出力しません）ので適当に塗りつぶしてください
	- レイヤーのアルファチャンネル（不透明度）は維持したま生成します
- 選択領域があるとその範囲にだけ生成します（上手くやるとインペイントっぽい挙動に）
- プラグインを入れたフォルダに「debuglog.txt」という名前でデバッグログを吐いてます
	- 生成経過も出してるからちょっと多いかも？ そのうちオプションで切れるようにします
- 選択範囲のサイズで生成します。デカいと死にます。
- 動作モード
	- TXT2IMG: プロンプトだけから生成します
	- IMG2IMG: 画面上の絵でi2iします
	- CONTROL: 画面上の絵をCntrolNetに渡して生成します
		- "controlnet_path" が適切に設定されている必要があります
- 設定ファイルの内容は "COMMON" セクションが共通で使われ、各モード毎の設定が優先されます


## ライセンス

ソースコードはクレジット無しで自由に弄ってもらって大丈夫です。（The Unlicense）


## 保証とサポート

ありませんし出来ません。気になる点は遠慮なく[issue](https://github.com/AonekoSS/SDPlugin/issues)に投げてください。

（むしろプルリク投げてくれてもええんやで……）
